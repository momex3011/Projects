{% extends 'layout.html' %}

{% block content %}
<div class="container">
    <h1>{{ _('Manage Users') }}</h1>
    <div class="card">
        <ul class="list-group">
            {% for user in users %}
                <li class="list-group-item d-flex justify-content-between align-items-center">
                    <span>{{ user.username }} - {{ user.email }} ({{ user.role }})</span>
                    <div>
                        {% if current_user.role == 'admin' %}
                            <form action="{{ url_for('edit_user', user_id=user.id, locale=get_locale() }}" method="GET" style="display: inline-block;">
                                <button type="submit" class="btn btn-sm btn-outline-info">{{ _('Edit') }}</button>
                            </form>
                            <form action="{{ url_for('delete_user', user_id=user.id, locale=get_locale() }}" method="POST" style="display: inline-block;">
                                <button type="submit" class="btn btn-sm btn-danger" onclick="return confirm('{{ _('Are you sure you want to delete this user?') }}')">{{ _('Delete') }}</button>
                            </form>
                        {% endif %}
                    </div>
                </li>
            {% endfor %}
        </ul>
    </div>
    <a href="{{ url_for('register', locale=get_locale())  }}" class="btn btn-primary mt-3">{{ _('Register New User') }}</a>
</div>
{% endblock %}